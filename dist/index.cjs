"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const i=require("react"),B=require("framer-motion"),C=require("react-hook-form"),F=require("@hookform/resolvers/zod"),x=require("zod"),ne=require("clsx");var G={exports:{}},_={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oe;function je(){if(oe)return _;oe=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function o(c,n,l){var d=null;if(l!==void 0&&(d=""+l),n.key!==void 0&&(d=""+n.key),"key"in n){l={};for(var m in n)m!=="key"&&(l[m]=n[m])}else l=n;return n=l.ref,{$$typeof:t,type:c,key:d,ref:n!==void 0?n:null,props:l}}return _.Fragment=s,_.jsx=o,_.jsxs=o,_}var N={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ae;function ve(){return ae||(ae=1,process.env.NODE_ENV!=="production"&&function(){function t(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case A:return"Profiler";case O:return"StrictMode";case he:return"Suspense";case pe:return"SuspenseList";case ge:return"Activity"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case T:return"Portal";case R:return(e.displayName||"Context")+".Provider";case D:return(e._context.displayName||"Context")+".Consumer";case fe:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case be:return a=e.displayName||null,a!==null?a:t(e.type)||"Memo";case Z:a=e._payload,e=e._init;try{return t(e(a))}catch{}}return null}function s(e){return""+e}function o(e){try{s(e);var a=!1}catch{a=!0}if(a){a=console;var u=a.error,h=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return u.call(a,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",h),s(e)}}function c(e){if(e===k)return"<>";if(typeof e=="object"&&e!==null&&e.$$typeof===Z)return"<...>";try{var a=t(e);return a?"<"+a+">":"<...>"}catch{return"<...>"}}function n(){var e=U.A;return e===null?null:e.getOwner()}function l(){return Error("react-stack-top-frame")}function d(e){if(Q.call(e,"key")){var a=Object.getOwnPropertyDescriptor(e,"key").get;if(a&&a.isReactWarning)return!1}return e.key!==void 0}function m(e,a){function u(){K||(K=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",a))}u.isReactWarning=!0,Object.defineProperty(e,"key",{get:u,configurable:!0})}function y(){var e=t(this.type);return ee[e]||(ee[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}function w(e,a,u,h,v,j,W,V){return u=j.ref,e={$$typeof:E,type:e,key:a,props:j,_owner:v},(u!==void 0?u:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:y}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:W}),Object.defineProperty(e,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:V}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function f(e,a,u,h,v,j,W,V){var p=a.children;if(p!==void 0)if(h)if(we(p)){for(h=0;h<p.length;h++)b(p[h]);Object.freeze&&Object.freeze(p)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else b(p);if(Q.call(a,"key")){p=t(e);var P=Object.keys(a).filter(function(ye){return ye!=="key"});h=0<P.length?"{key: someKey, "+P.join(": ..., ")+": ...}":"{key: someKey}",se[p+h]||(P=0<P.length?"{"+P.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,h,p,P,p),se[p+h]=!0)}if(p=null,u!==void 0&&(o(u),p=""+u),d(a)&&(o(a.key),p=""+a.key),"key"in a){u={};for(var J in a)J!=="key"&&(u[J]=a[J])}else u=a;return p&&m(u,typeof e=="function"?e.displayName||e.name||"Unknown":e),w(e,p,j,v,n(),u,W,V)}function b(e){typeof e=="object"&&e!==null&&e.$$typeof===E&&e._store&&(e._store.validated=1)}var g=i,E=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),R=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),ge=Symbol.for("react.activity"),xe=Symbol.for("react.client.reference"),U=g.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=Object.prototype.hasOwnProperty,we=Array.isArray,q=console.createTask?console.createTask:function(){return null};g={react_stack_bottom_frame:function(e){return e()}};var K,ee={},re=g.react_stack_bottom_frame.bind(g,l)(),te=q(c(l)),se={};N.Fragment=k,N.jsx=function(e,a,u,h,v){var j=1e4>U.recentlyCreatedOwnerStacks++;return f(e,a,u,!1,h,v,j?Error("react-stack-top-frame"):re,j?q(c(e)):te)},N.jsxs=function(e,a,u,h,v){var j=1e4>U.recentlyCreatedOwnerStacks++;return f(e,a,u,!0,h,v,j?Error("react-stack-top-frame"):re,j?q(c(e)):te)}}()),N}process.env.NODE_ENV==="production"?G.exports=je():G.exports=ve();var r=G.exports;const ie=i.createContext(null),Ee=({config:t,children:s})=>{const o=i.useMemo(()=>t,[t]);return r.jsx(ie.Provider,{value:o,children:s})},L=()=>{const t=i.useContext(ie);if(!t)throw new Error("useAuthUI must be used within AuthUIProvider");return t},Se=({children:t})=>{const[s,o]=i.useState(()=>typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");return i.useEffect(()=>{typeof document<"u"&&document.documentElement.classList.toggle("dark",s==="dark")},[s]),r.jsx("div",{"data-theme":s,children:t})},le=i.createContext(null),ke=({children:t})=>{const[s,o]=i.useState([]),c=i.useCallback(n=>{const l=Date.now();o(d=>[...d,{id:l,...n}]),setTimeout(()=>o(d=>d.filter(m=>m.id!==l)),3500)},[]);return r.jsxs(le.Provider,{value:{push:c},children:[t,r.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-[9999]",children:s.map(n=>r.jsx("div",{className:`glass px-4 py-2 rounded-lg text-sm ${n.type==="error"?"border-red-500/40":"border-emerald-500/40"}`,children:n.message},n.id))})]})},I=()=>{const t=i.useContext(le);if(!t)throw new Error("useToast must be used inside ToastProvider");return t};function Pe(){const[t,s]=i.useState(()=>document.documentElement.classList.contains("dark"));return i.useEffect(()=>{document.documentElement.classList.toggle("dark",t)},[t]),{isDark:t,setIsDark:s}}const Re=()=>{const{isDark:t,setIsDark:s}=Pe();return r.jsxs("button",{className:"text-sm px-3 py-1 rounded-full glass",onClick:()=>s(!t),children:[t?"Light":"Dark"," mode"]})},_e=({initial:t="login"})=>{const[s,o]=i.useState(t);return r.jsxs("div",{className:"min-h-[80vh] grid place-items-center p-6 bg-[radial-gradient(ellipse_at_top,theme(colors.primary/20),transparent)]",children:[r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx(Re,{})}),r.jsx(B.AnimatePresence,{mode:"wait",children:r.jsxs(B.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.25},className:"w-full",children:[s==="login"&&r.jsx(i.Suspense,{fallback:r.jsx("div",{children:"Loading..."}),children:r.jsx(Ne,{onNavigate:o})}),s==="register"&&r.jsx(i.Suspense,{fallback:r.jsx("div",{children:"Loading..."}),children:r.jsx(Te,{onNavigate:o})}),s==="forgot"&&r.jsx(i.Suspense,{fallback:r.jsx("div",{children:"Loading..."}),children:r.jsx(Oe,{onNavigate:o})}),s==="reset"&&r.jsx(i.Suspense,{fallback:r.jsx("div",{children:"Loading..."}),children:r.jsx(Ae,{onNavigate:o})})]},s)})]})},Ne=i.lazy(()=>Promise.resolve().then(()=>Ie).then(t=>({default:t.LoginForm}))),Te=i.lazy(()=>Promise.resolve().then(()=>Me).then(t=>({default:t.RegisterForm}))),Oe=i.lazy(()=>Promise.resolve().then(()=>Ye).then(t=>({default:t.ForgotPasswordForm}))),Ae=i.lazy(()=>Promise.resolve().then(()=>De).then(t=>({default:t.ResetPasswordForm}))),X=x.z.string().email("Enter a valid email"),H=x.z.string().min(8,"At least 8 characters"),ze=x.z.object({email:X,password:x.z.string().min(1,"Password is required"),remember:x.z.boolean().optional()}),Ce=x.z.object({firstName:x.z.string().min(1,"Required"),lastName:x.z.string().min(1,"Required"),email:X,contactNumber:x.z.string().optional(),password:H}),Fe=x.z.object({email:X}),Le=x.z.object({token:x.z.string().min(1,"Invalid token"),newPassword:H,confirmPassword:H}).refine(t=>t.newPassword===t.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),$=({title:t,subtitle:s,children:o})=>r.jsxs("div",{className:"glass rounded-3xl p-6 w-full max-w-md mx-auto",children:[t&&r.jsx("h2",{className:"text-xl font-semibold mb-1",children:t}),s&&r.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 mb-4",children:s}),o]}),S=({label:t,error:s,className:o,...c})=>r.jsxs("label",{className:"block",children:[t&&r.jsx("span",{className:"block mb-1 text-sm font-medium",children:t}),r.jsx("input",{className:ne.clsx("w-full rounded-xl border border-zinc-300 dark:border-zinc-700 bg-white/70 dark:bg-zinc-900/70 px-3 py-2 outline-none focus:ring-2 focus:ring-primary",s&&"border-red-500 focus:ring-red-500",o),...c}),s&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:s})]}),z=t=>{const[s,o]=i.useState(!1);return r.jsxs("div",{className:"relative",children:[r.jsx(S,{...t,type:s?"text":"password"}),r.jsx("button",{type:"button",className:"absolute right-3 top-[34px] text-xs text-zinc-500",onClick:()=>o(c=>!c),children:s?"Hide":"Show"})]})},M=({className:t,loading:s,children:o,disabled:c,...n})=>r.jsxs(B.motion.button,{whileTap:{scale:.98},className:ne.clsx("inline-flex items-center justify-center rounded-2xl px-4 py-2 font-medium text-white bg-primary hover:bg-primary-700 transition shadow-lg disabled:opacity-60 disabled:cursor-not-allowed",t),disabled:c||s,...n,children:[s&&r.jsx("span",{className:"mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),o]});async function Y(t,s,o={}){var l;const c=t.apiBaseUrl+s,n=await fetch(c,{method:o.method||"POST",headers:{"Content-Type":"application/json",...((l=t.headers)==null?void 0:l.call(t))||{}},body:o.body?JSON.stringify(o.body):void 0,credentials:"include"});if(!n.ok){const d=await n.text().catch(()=>"");throw new Error(d||`Request failed (${n.status})`)}return n.json()}const ce=({onNavigate:t})=>{var w,f;const{push:s}=I(),o=L(),[c,n]=i.useState(!1),{register:l,handleSubmit:d,formState:{errors:m}}=C.useForm({resolver:F.zodResolver(ze),defaultValues:{remember:!0}}),y=d(async b=>{try{n(!0);const g=await Y(o,o.routes.login,{body:{email:b.email,password:b.password}});s({type:"success",message:"Logged in successfully"}),window.dispatchEvent(new CustomEvent("auth:login",{detail:g}))}catch(g){s({type:"error",message:g.message||"Login failed"})}finally{n(!1)}});return r.jsxs($,{title:"Welcome back",subtitle:"Log in to continue",children:[r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsx(S,{label:"Email",type:"email",placeholder:"you@example.com",...l("email"),error:(w=m.email)==null?void 0:w.message}),r.jsx(z,{label:"Password",placeholder:"••••••••",...l("password"),error:(f=m.password)==null?void 0:f.message}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",className:"accent-primary",...l("remember")})," Remember me"]}),r.jsx("button",{type:"button",className:"text-primary",onClick:()=>t("forgot"),children:"Forgot password?"})]}),r.jsx(M,{type:"submit",loading:c,className:"w-full",children:"Sign in"})]}),r.jsxs("p",{className:"mt-4 text-sm",children:["No account? ",r.jsx("button",{className:"text-primary",onClick:()=>t("register"),children:"Create one"})]})]})},Ie=Object.freeze(Object.defineProperty({__proto__:null,LoginForm:ce},Symbol.toStringTag,{value:"Module"}));function $e(t){let s=0;return t?(s+=Math.min(10,t.length)*6,/[a-z]/.test(t)&&(s+=10),/[A-Z]/.test(t)&&(s+=10),/[0-9]/.test(t)&&(s+=10),/[^\w\s]/.test(t)&&(s+=10),Math.min(s,100)):s}const ue=({onNavigate:t})=>{var E,T,k,O,A;const{push:s}=I(),o=L(),[c,n]=i.useState(!1),[l,d]=i.useState(0),{register:m,handleSubmit:y,watch:w,formState:{errors:f}}=C.useForm({resolver:F.zodResolver(Ce)}),b=w("password");i.useEffect(()=>{d($e(b||""))},[b]);const g=y(async D=>{try{n(!0);const R=await Y(o,o.routes.register,{body:D});s({type:"success",message:"Account created"}),window.dispatchEvent(new CustomEvent("auth:login",{detail:R}))}catch(R){s({type:"error",message:R.message||"Registration failed"})}finally{n(!1)}});return r.jsxs($,{title:"Create your account",subtitle:"Join us in a minute",children:[r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(S,{label:"First name",...m("firstName"),error:(E=f.firstName)==null?void 0:E.message}),r.jsx(S,{label:"Last name",...m("lastName"),error:(T=f.lastName)==null?void 0:T.message})]}),r.jsx(S,{label:"Email",type:"email",...m("email"),error:(k=f.email)==null?void 0:k.message}),r.jsx(S,{label:"Contact number",placeholder:"(+94) 771 234 567",...m("contactNumber"),error:(O=f.contactNumber)==null?void 0:O.message}),r.jsxs("div",{children:[r.jsx(z,{label:"Password",...m("password"),error:(A=f.password)==null?void 0:A.message}),r.jsx("div",{className:"h-2 bg-zinc-200 dark:bg-zinc-800 rounded mt-2 overflow-hidden",children:r.jsx("div",{className:"h-full bg-emerald-500 transition-all",style:{width:`${l}%`}})}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Password strength"})]}),r.jsx(M,{type:"submit",loading:c,className:"w-full",children:"Create account"})]}),r.jsxs("p",{className:"mt-4 text-sm",children:["Have an account? ",r.jsx("button",{className:"text-primary",onClick:()=>t("login"),children:"Sign in"})]})]})},Me=Object.freeze(Object.defineProperty({__proto__:null,RegisterForm:ue},Symbol.toStringTag,{value:"Module"})),de=({onNavigate:t})=>{var w;const{push:s}=I(),o=L(),[c,n]=i.useState(!1),{register:l,handleSubmit:d,formState:{errors:m}}=C.useForm({resolver:F.zodResolver(Fe)}),y=d(async f=>{try{n(!0),await Y(o,o.routes.forgotPassword,{body:f}),s({type:"success",message:"If the email exists, a reset link has been sent."}),t("login")}catch(b){s({type:"error",message:b.message||"Request failed"})}finally{n(!1)}});return r.jsxs($,{title:"Forgot password",subtitle:"We will email you a reset link",children:[r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsx(S,{label:"Email",type:"email",...l("email"),error:(w=m.email)==null?void 0:w.message}),r.jsx(M,{type:"submit",loading:c,className:"w-full",children:"Send reset link"})]}),r.jsx("p",{className:"mt-4 text-sm",children:r.jsx("button",{className:"text-primary",onClick:()=>t("login"),children:"Back to sign in"})})]})},Ye=Object.freeze(Object.defineProperty({__proto__:null,ForgotPasswordForm:de},Symbol.toStringTag,{value:"Module"})),me=({onNavigate:t,token:s})=>{var f,b;const{push:o}=I(),c=L(),[n,l]=i.useState(!1),{register:d,handleSubmit:m,formState:{errors:y}}=C.useForm({resolver:F.zodResolver(Le),defaultValues:{token:s||new URLSearchParams(typeof window<"u"?window.location.search:"").get("token")||""}}),w=m(async g=>{try{l(!0),await Y(c,c.routes.resetPassword,{body:{token:g.token,newPassword:g.newPassword}}),o({type:"success",message:"Password reset successfully"}),t("login")}catch(E){o({type:"error",message:E.message||"Reset failed"})}finally{l(!1)}});return r.jsxs($,{title:"Reset password",subtitle:"Enter your new password",children:[r.jsxs("form",{onSubmit:w,className:"space-y-4",children:[r.jsx("input",{type:"hidden",...d("token")}),r.jsx(z,{label:"New password",...d("newPassword"),error:(f=y.newPassword)==null?void 0:f.message}),r.jsx(z,{label:"Confirm password",...d("confirmPassword"),error:(b=y.confirmPassword)==null?void 0:b.message}),r.jsx(M,{type:"submit",loading:n,className:"w-full",children:"Reset password"})]}),r.jsx("p",{className:"mt-4 text-sm",children:r.jsx("button",{className:"text-primary",onClick:()=>t("login"),children:"Back to sign in"})})]})},De=Object.freeze(Object.defineProperty({__proto__:null,ResetPasswordForm:me},Symbol.toStringTag,{value:"Module"}));exports.AuthShell=_e;exports.AuthUIProvider=Ee;exports.ForgotPasswordForm=de;exports.LoginForm=ce;exports.RegisterForm=ue;exports.ResetPasswordForm=me;exports.ThemeProvider=Se;exports.ToastProvider=ke;
//# sourceMappingURL=index.cjs.map
